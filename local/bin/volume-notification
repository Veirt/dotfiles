#!/bin/dash

if [ "$1" = "up" ]; then
    # oh god whatever this is
    # https://unix.stackexchange.com/a/230533
    VOLUME=$( pactl list sinks | grep '^[[:space:]]Volume:' | head -n $(( $SINK + 1 )) | tail -n 1 | sed -e 's,.* \([0-9][0-9]*\)%.*,\1,' )

    if [ $VOLUME -lt 130 ]; then
        pactl -- set-sink-volume 0 +5%
    fi
elif [ "$1" = "down" ]; then
    pactl -- set-sink-volume 0 -5%
fi

VOLUME=$(pamixer --get-volume)

# Send the notification with the icon:
notify-send.sh "Volume ${VOLUME}%" \
    --replace-file=/tmp/volume-notification \
    -t 2000 \
    --icon ~/.icons/volume.png \
    -h string:synchronous:volume-change
